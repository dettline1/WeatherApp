{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- Search Card -->
        <div class="card glass-card mb-4">
            <div class="card-body">
                <h2 class="text-center mb-4 text-white">
                    <i class="bi bi-search"></i> {{ translations.app_title }}
                </h2>
                
                <div class="input-group mb-3">
                    <input 
                        type="text" 
                        class="form-control form-control-lg" 
                        id="cityInput" 
                        placeholder="{{ translations.search_placeholder }}"
                        autocomplete="off"
                    >
                    <button 
                        class="btn btn-primary btn-lg" 
                        type="button" 
                        id="searchBtn"
                        onclick="searchWeather()"
                    >
                        <i class="bi bi-cloud-sun"></i> {{ translations.search_button }}
                    </button>
                </div>
                
                <div class="text-center">
                    <button 
                        class="btn btn-outline-light btn-sm" 
                        onclick="autodetectCity()"
                        id="autodetectBtn"
                    >
                        <i class="bi bi-geo-alt-fill"></i> {{ translations.autodetect }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Error Alert -->
        <div id="errorAlert" class="alert alert-danger d-none" role="alert">
            <i class="bi bi-exclamation-triangle-fill"></i>
            <span id="errorMessage"></span>
        </div>
        
        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="text-center d-none my-4">
            <div class="spinner-border text-light" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        
        <!-- Weather Card -->
        <div id="weatherCard" class="card glass-card d-none mb-4">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-4 text-center">
                        <img id="weatherIcon" src="" alt="Weather Icon" class="weather-icon">
                        <h3 class="text-white mt-3" id="cityName"></h3>
                        <p class="text-white-50" id="weatherDescription"></p>
                    </div>
                    <div class="col-md-8">
                        <div class="weather-info">
                            <div class="weather-stat">
                                <i class="bi bi-thermometer-half"></i>
                                <div>
                                    <span class="label">{{ translations.temperature }}</span>
                                    <span class="value" id="temperature"></span>
                                </div>
                            </div>
                            <div class="weather-stat">
                                <i class="bi bi-thermometer"></i>
                                <div>
                                    <span class="label">{{ translations.feels_like }}</span>
                                    <span class="value" id="feelsLike"></span>
                                </div>
                            </div>
                            <div class="weather-stat">
                                <i class="bi bi-droplet-fill"></i>
                                <div>
                                    <span class="label">{{ translations.humidity }}</span>
                                    <span class="value" id="humidity"></span>
                                </div>
                            </div>
                            <div class="weather-stat">
                                <i class="bi bi-wind"></i>
                                <div>
                                    <span class="label">{{ translations.wind_speed }}</span>
                                    <span class="value" id="windSpeed"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- History Card -->
        {% if history %}
        <div class="card glass-card">
            <div class="card-body">
                <h5 class="text-white mb-3">
                    <i class="bi bi-clock-history"></i> {{ translations.history_title }}
                </h5>
                <div class="list-group list-group-flush">
                    {% for item in history %}
                    <a 
                        href="#" 
                        class="list-group-item list-group-item-action bg-transparent text-white border-secondary"
                        onclick="searchWeatherByName('{{ item.city }}'); return false;"
                    >
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-geo-alt"></i>
                                <strong>{{ item.city }}</strong>, {{ item.country }}
                                <span class="text-white-50 ms-2">{{ item.temperature }}°C</span>
                            </div>
                            <small class="text-white-50">{{ item.timestamp[:16] }}</small>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<script>
    // Передача переводов в JavaScript
    const translations = {{ translations | tojson }};
    const currentLang = "{{ lang }}";
</script>
{% endblock %}

